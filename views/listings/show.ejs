<% layout("./layouts/boilerplate") %>
<body>
    <div class="row mt-3">
        <div class="col-8 offset-3">
            <h1><%= listing.title || "Untitled Listing" %></h1>
        </div>

        <div class="card col-6 offset-3 show-card listing-card">
            <% if(listing.image && listing.image.url){ %>
                <img src="<%= listing.image.url %>" class="card-img-top show-img" alt="listing_image">
            <% } else { %>
                <img src="/images/default.jpg" class="card-img-top show-img" alt="No Image Available">
            <% } %>

            <div class="card-body">
                <p class="card-text">
                    <p>
                        <i>Posted by: 
                            <%= listing.owner ? listing.owner.username : "Unknown User" %>
                        </i>
                    </p>
                    <%= listing.description || "No description available." %><br>
                    ₹ <%= listing.price ? listing.price.toLocaleString("en-IN") : "Price not available" %> / night <br>
                    <%= listing.country || "Unknown Country" %> <br>
                    <%= listing.location || "Unknown Location" %> <br>
                </p>

                <!-- ✅ Booking Button -->
                <form action="/book/<%= listing._id %>" method="POST">
                    <button class="btn btn-success w-100 mt-2">Book Now</button>
                </form>
            </div>
        </div>
        <br>
    </div>
